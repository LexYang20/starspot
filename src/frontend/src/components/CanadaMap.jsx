import React, { useEffect } from 'react';
import { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';
import 'leaflet/dist/leaflet.css';

import L from 'leaflet';
import icon from 'leaflet/dist/images/marker-icon.png';
import iconShadow from 'leaflet/dist/images/marker-shadow.png';

// 默认图标设置
let DefaultIcon = L.icon({
    iconUrl: icon,
    shadowUrl: iconShadow,
    iconSize: [25, 41],
    iconAnchor: [12, 41]
});

L.Marker.prototype.options.icon = DefaultIcon;

// 城市坐标映射
const cityCoordinates = {'Airdrie': ['51.28597', '-114.01062'], 'Brock': ['44.347685049999995', '-79.10016490761303'], 'Beaumont': ['53.3525496', '-113.4151434'], 'Brooks': ['50.571027', '-111.893005'], 'Banff': ['51.175076', '-115.5720773'], 'Blackfalds': ['52.383333', '-113.8'], 'Bonnyville': ['54.267925', '-110.741515'], 'Calgary': ['51.0456064', '-114.057541'], 'Cochrane': ['50.630898', '-82.1914444'], 'Chestermere': ['51.0449653', '-113.821414'], 'Crowsnest Pass': ['49.6189587', '-114.4944274'], 'Camrose': ['53.013131', '-112.840576'], 'Canmore': ['51.0866897', '-115.3481135'], 'Cold Lake': ['54.46046', '-110.192871'], 'Coaldale': ['49.7256552', '-112.6166534'], 'Drayton Valley': ['53.2205548', '-114.9832127'], 'Devon': ['53.3633545', '-113.7316992'], 'Didsbury': ['51.6567661', '-114.13756821660974'], 'Drumheller': ['51.4169325', '-112.6402382'], 'Edmonton': ['53.5462055', '-113.491241'], 'Edson': ['53.5858662', '-116.442847'], 'Fort Saskatchewan': ['53.7128571', '-113.214894'], 'Grande Prairie': ['55.17108', '-118.7949873'], 'Hinton': ['53.3990512', '-117.5886772'], 'High River': ['50.5801916', '-113.8709332'], 'Innisfail': ['52.0274651', '-113.9502354'], 'Lethbridge': ['49.6945782', '-112.8331033'], 'Lloydminster': ['53.279995', '-110.00885'], 'Lake Louise': ['51.4249668', '-116.177535'], 'Leduc': ['53.2607825', '-113.5511681'], 'Lacombe': ['52.4727515', '-113.733215'], 'Medicine Hat': ['50.04303', '-110.679016'], 'Morinville': ['53.8009283', '-113.6506625'], 'Okotoks': ['50.7253685', '-113.975082'], 'Olds': ['51.7923735', '-114.1130367'], 'Peace River': ['57.301562', '-117.1601379'], 'Ponoka': ['52.6794142', '-113.5871706'], 'Redcliff': ['50.0849439', '-110.7849638'], 'Rocky Mountain House': ['52.3768803', '-114.9183995'], 'Red Deer': ['52.2690628', '-113.8141464'], 'Sylvan Lake': ['52.3102136', '-114.0974155'], 'St. Paul': ['53.9876467', '-111.291114'], 'Stony Plain': ['53.5289862', '-114.004873'], 'Saint-Paul': ['45.9842686', '-73.4463225'], 'Stettler': ['52.3228746', '-112.71302'], 'St. Albert': ['53.633239', '-113.628845'], 'Strathmore': ['51.0435486', '-113.3998479'], 'Spruce Grove': ['53.545204', '-113.903503'], 'Taber': ['49.8895343', '-112.0488074'], 'Three Hills': ['51.7024122', '-113.268475'], 'Vegreville': ['53.5', '-112.05'], 'Wainwright': ['52.8402725', '-110.8514344'], 'Westlock': ['54.1525241', '-113.8519902'], 'Wood Buffalo': ['57.6527825', '-111.4667'], 'Wetaskiwin': ['52.968492', '-113.36792'], 'Abbotsford': ['49.0521162', '-122.329479'], 'Burnaby': ['49.2433804', '-122.972545'], 'Cranbrook': ['49.5107477', '-115.7672772'], 'Campbell River': ['50.023071', '-125.244153'], 'Courtenay': ['49.6894061', '-124.9954959'], 'Coldstream': ['50.2238758', '-119.2297404'], 'Colwood': ['48.4234135', '-123.493964'], 'Castlegar': ['49.316171', '-117.663574'], 'Chilliwack': ['49.1709788', '-121.95255'], 'Central Saanich': ['48.5946782', '-123.420726'], 'Creston': ['49.0971526', '-116.5129759'], 'Coquitlam': ['49.2842958', '-122.793281'], 'Comox': ['49.6727575', '-124.9276204'], 'Duncan': ['48.7786872', '-123.7080446'], 'Delta': ['49.0846258', '-123.057938'], 'Douglas': ['49.0058765', '-122.7412466'], 'Dawson Creek': ['55.7605306', '-120.2364453'], 'East Kelowna': ['49.8512382', '-119.4072657'], 'Esquimalt': ['48.429995', '-123.41359'], 'Fort St. John': ['56.2524039', '-120.846943'], 'Fernie': ['49.5041747', '-115.062867'], 'Golden': ['51.2992217', '-116.9642955'], 'Hope': ['49.3799779', '-121.4415851'], 'Kent': ['49.282662349999995', '-121.84906761651206'], 'Kimberley': ['49.6850876', '-115.9819477'], 'Kamloops': ['50.6758269', '-120.339415'], 'Kelowna': ['49.8879177', '-119.495902'], 'Kitimat': ['54.0535577', '-128.6540519'], 'Langford Station': ['48.4468639', '-123.4976575343454'], 'Langley': ['49.1039289', '-122.657047'], 'Ladysmith': ['48.9936579', '-123.8157964'], 'Lake Country': ['50.0302364', '-119.402331'], 'Merritt': ['50.1124876', '-120.7884149'], 'Maple Ridge': ['49.2197345', '-122.599707'], 'Mission': ['49.1589351', '-122.283583'], 'North Vancouver': ['49.3206294', '-123.0737925'], 'North Saanich': ['48.6563671', '-123.432794'], 'New Westminster': ['49.2067726', '-122.9108818'], 'North Cowichan': ['48.8247302', '-123.7191813'], 'Nelson': ['49.494891', '-117.290039'], 'Nanaimo': ['49.163877', '-123.938122'], 'Northern Rockies': ['59.124587', '-122.8709621'], 'Osoyoos': ['49.033333', '-119.466667'], 'Oak Bay': ['48.4261126', '-123.3170727'], 'Port Alberni': ['49.2343668', '-124.8056517'], 'Prince Rupert': ['54.3126572', '-130.32549'], 'Penticton': ['49.5003268', '-119.593249'], 'Pitt Meadows': ['49.2207623', '-122.690153'], 'Prince George': ['53.9128645', '-122.7453699'], 'Port Coquitlam': ['49.2621643', '-122.780542'], 'Parksville': ['49.3179514', '-124.311739'], 'Peachland': ['49.766667', '-119.75'], 'Port Moody': ['49.2821981', '-122.8293554'], 'Powell River': ['49.835676', '-124.524412'], 'Quesnel': ['52.9794279', '-122.493627'], 'Qualicum Beach': ['49.3479861', '-124.4439409'], 'Richmond': ['49.163168', '-123.137414'], 'Salmon Arm': ['50.7005059', '-119.2790529'], 'Surrey': ['49.1913033', '-122.849143'], 'Saanich': ['48.4594315', '-123.376494'], 'Sidney': ['48.6505788', '-123.398324'], 'Smithers': ['54.7792074', '-127.1760991'], 'Squamish': ['49.6980743', '-123.155861'], 'Sechelt': ['49.4721147', '-123.763124'], 'Spallumcheen': ['50.4468294', '-119.27405718668717'], 'Sooke': ['48.3825724', '-123.731517'], 'Summerland': ['49.6', '-119.666667'], 'Terrace': ['54.5172715', '-128.599548'], 'Taché': ['49.72912455', '-96.67350962110007'], 'Trail': ['49.0945296', '-117.7097659'], 'Vancouver': ['49.2608724', '-123.113952'], 'View Royal': ['48.4518052', '-123.434306'], 'Victoria': ['48.4283182', '-123.364953'], 'Vernon': ['50.2668671', '-119.2718157'], 'Williams Lake': ['52.1292657', '-122.1397259'], 'Whistler': ['50.1171903', '-122.9543022'], 'West Vancouver': ['49.3311208', '-123.159479'], 'White Rock': ['49.0235357', '-122.797924'], 'Argyle': ['49.1216704', '-101.4866484'], 'Brandon': ['49.8511143', '-99.9608924'], 'Brokenhead': ['50.13770465', '-96.53183504232231'], 'Churchill': ['58.7693101', '-94.1736843'], 'Dauphin': ['51.153509', '-100.04425'], 'East St. Paul': ['49.979488', '-97.014771'], 'Flin Flon': ['54.76653095', '-101.84091676108764'], 'Gimli': ['50.6323125', '-96.9881076'], 'La Broquerie': ['49.39589535', '-96.51117895304455'], 'Macdonald': ['49.68039765', '-97.44741379089254'], 'Morden': ['49.1927055', '-98.1014567'], 'Portage La Prairie': ['49.972422', '-98.289185'], 'Ritchot': ['49.657532599999996', '-97.0745649543695'], 'Selkirk': ['50.146986', '-96.880188'], 'Steinbach': ['49.530557', '-96.69342'], 'Ste. Anne': ['49.6711222', '-96.6536701'], 'The Pas': ['53.8224172', '-101.2405153'], 'Thompson': ['55.743347', '-97.863464'], 'West St. Paul': ['49.997147', '-97.077942'], 'Winkler': ['49.187089', '-97.937622'], 'Winnipeg': ['49.8955367', '-97.1384584'], 'Beresford': ['47.7047087', '-65.7032868'], 'Beaubassin East / Beaubassin-est': ['46.16060095', '-64.31737467324993'], 'Bathurst': ['47.6208671', '-65.6537546'], 'Campbellton': ['48.0046634', '-66.6765986'], 'Dieppe': ['46.0966797', '-64.7357347'], 'Edmundston': ['47.3637203', '-68.3288825'], 'Fredericton': ['45.963233', '-66.6432356'], 'Grand Falls': ['47.047563', '-67.7407527'], 'Moncton': ['46.0985679', '-64.8004265'], 'Mapleton': ['43.717472099999995', '-80.68926371473657'], 'Miramichi': ['47.030058', '-65.4707468'], 'Oromocto': ['45.8474496', '-66.471212'], 'Quispamsis': ['45.4179234', '-65.9431252'], 'Riverview': ['53.4414503', '-113.6752797'], 'Rothesay': ['45.3815475', '-65.9879398'], 'Saint John': ['45.2787992', '-66.0585188'], 'Shediac': ['46.219454', '-64.5492146'], 'Sackville': ['45.9079431', '-64.3723708'], 'St. Andrews': ['50.0714', '-96.9833'], 'Tracadie': ['45.6227612', '-61.6701334'], 'Bay Roberts': ['47.575924', '-53.2833409'], 'Conception Bay South': ['47.50674745', '-52.9905179737796'], 'Clarenville': ['48.1679902', '-53.9646413'], 'Corner Brook': ['48.95317', '-57.947388'], 'Deer Lake': ['49.1830366', '-57.4320002'], 'Gander': ['48.9592291', '-54.6187879'], 'Happy Valley': ['49.1344098', '-105.013041'], 'Labrador City': ['52.9422944', '-66.9177291'], 'Marystown': ['47.1658498', '-55.1579778'], 'Mount Pearl Park': [47.518890, -52.805832], "Portugal Cove-St. Philip's": ['47.5734324', '-52.8591346'], 'Paradise': ['47.5255933', '-52.8724145'], "St. John's": ['47.5614705', '-52.7126162'], 'Stephenville': ['48.5452022', '-58.5871146'], 'Saint Anthony': ['53.51776665', '-113.50572383420345'], 'Torbay': ['47.6576953', '-52.726986'], 'Antigonish': ['45.6213607', '-61.9904928'], 'Amherst': ['46.04128565', '-74.76953942616015'], 'Bridgewater': ['44.3774134', '-64.5193946'], 'Burton': ['46.7703834', '-64.3345859'], 'Barrington': ['43.5645545', '-65.5641098'], 'Cape Breton': ['46.2950327', '-60.93605535048172'], 'Church Point': ['44.340335', '-66.1113132'], 'Chester': ['44.5413322', '-64.2411853'], 'Halifax': ['44.648618', '-63.5859487'], 'Inverness': ['46.2596772', '-71.521879'], 'Kentville': ['45.0784875', '-64.495212'], 'New Glasgow': ['45.5869474', '-62.6483547'], 'Stanley': ['46.2830621', '-66.741204'], 'Springfield': ['49.92955035', '-96.69283545576303'], 'Truro': ['45.3656974', '-63.2864971'], 'Wilmot': ['43.39576635', '-80.63520272121451'], 'Yarmouth': ['43.8372648', '-66.1157'], 'Amherstburg': ['42.101309', '-83.1086801'], 'Ajax': ['43.8505287', '-79.0208814'], 'Aurora': ['43.99973', '-79.467545'], 'Alfred and Plantagenet': ['45.5438263', '-74.9852273331816'], 'Adjala-Tosorontio': ['44.1375186', '-79.9421083123357'], 'Ashfield-Colborne-Wawanosh': ['43.8581039', '-81.5977006731455'], 'Arran-Elderslie': ['44.398078350000006', '-81.2000689260308'], 'Augusta': ['44.738986350000005', '-75.63448418193349'], 'Arnprior': ['45.433515', '-76.3543692'], 'Aylmer': ['42.773227', '-80.983658'], 'Alnwick/Haldimand': ['44.097441700000005', '-78.04760303007441'], 'Beckwith': ['45.087480049999996', '-76.08243025484217'], 'Brampton': ['43.685832', '-79.7599366'], 'Burlington': ['43.3248924', '-79.7966835'], 'Brockville': ['44.6039207', '-75.7016829'], 'Bayham': ['42.75', '-80.78797003717852'], 'Bluewater': ['43.4679793', '-81.61287622487282'], 'Bracebridge': ['45.041508', '-79.310989'], 'Brockton': ['44.186126650000006', '-81.22181375972701'], 'Brantford': ['43.1408157', '-80.2631733'], 'Brighton': ['44.0422275', '-77.7370071'], 'Belleville': ['44.2436328', '-77.3607597'], 'Brant': ['43.1010804', '-80.4288217'], 'Barrie': ['44.3893208', '-79.6901302'], 'Bradford West Gwillimbury': ['44.1143279', '-79.5647069'], 'Blandford-Blenheim': ['43.2462916', '-80.59863089020438'], 'Chatsworth': ['44.4560807', '-80.8978758'], 'Carleton Place': ['45.1403366', '-76.1465672'], 'Chatham': ['42.4057219', '-82.1853837'], 'Collingwood': ['44.5027226', '-80.2172379'], 'Clarence-Rockland': ['45.5247978', '-75.2607533'], 'Cornwall': ['45.0469989', '-74.7333845'], 'Cambridge': ['43.3600536', '-80.3123023'], 'Central Elgin': ['42.77210175', '-81.09197900531538'], 'Cavan Monaghan': ['44.190608', '-78.46896060471727'], 'Clarington': ['43.96866945', '-78.6513545003969'], 'Cramahe': ['44.0707335', '-77.87121733431846'], 'Central Huron': ['43.6600733', '-81.54332585139252'], 'Clearview': ['44.36827245', '-80.06694727187954'], 'Centre Wellington': ['43.71809265', '-80.37477355636713'], 'Caledon': ['43.832069849999996', '-79.90668711186211'], 'Cobourg': ['43.9595998', '-78.1677784'], 'Dysart et al': ['45.2007432', '-78.40030815452491'], 'Drummond/North Elmsley': ['44.956898100000004', '-76.21034565791723'], 'Douro-Dummer': ['44.4502138', '-78.10523481975095'], 'Dryden': ['49.785698', '-92.835846'], 'Essa': ['44.2344356', '-79.8063686586334'], 'Elliot Lake': ['46.373464', '-82.652893'], 'East Gwillimbury': ['44.1435081', '-79.41190570379848'], 'Edwardsburgh/Cardinal': ['44.8312292', '-75.49699401204806'], 'East Zorra-Tavistock': ['43.235852', '-80.8137615'], 'Essex': ['42.2354142', '-82.7120106'], 'Erin': ['43.77506', '-80.070076'], 'Elizabethtown-Kitley': ['44.68248785', '-75.80833311545453'], 'Fort Frances': ['48.6114425', '-93.3967615'], 'Fort Erie': ['42.91308', '-78.918611'], 'Front of Yonge': ['44.50220295', '-75.85293349059256'], 'Georgina': ['44.341595749999996', '-79.34615813017496'], 'Greater Napanee': ['44.2473883', '-76.9505543'], 'Grimsby': ['43.1931661', '-79.560677'], 'Gravenhurst': ['44.91741', '-79.373131'], 'Georgian Bluffs': ['44.68872225', '-81.00872535041186'], 'Grey Highlands': ['44.35654685', '-80.46038959610259'], 'Guelph': ['43.5460516', '-80.2493276'], 'Gananoque': ['44.3352722', '-76.1646638'], 'Guelph/Eramosa': ['43.5964593', '-80.2567182345291'], 'Goderich': ['43.7430924', '-81.7110949'], 'Hanover': ['49.421589499999996', '-96.7814848768908'], 'Huron East': ['43.6213738', '-81.29221638447679'], 'Hawkesbury': ['45.610281', '-74.6055611'], 'Hamilton Township': ['44.0554803', '-78.21927325429056'], 'Hamilton': ['43.2560802', '-79.8728583'], 'Hindon Hill': [45.0461, 78.7916], 'Hearst': ['49.690732', '-83.666382'], 'Huntsville': ['45.3263919', '-79.218434'], 'Halton Hills': ['43.64701', '-80.017604'], 'Huron-Kinloss': ['44.03441265', '-81.54706912412098'], 'Innisfil': ['44.3150892', '-79.5461073'], 'Ingersoll': ['43.037725', '-80.88211'], 'Kenora': ['54.0245941', '-89.1618188'], 'Kawartha Lakes': ['44.3596825', '-78.7421729'], 'Kirkland Lake': ['48.154177', '-80.031281'], 'Kapuskasing': ['49.416667', '-82.433333'], 'Kincardine': ['44.1776378', '-81.6348713'], 'Kingsville': ['42.0378963', '-82.7396606'], 'Kitchener': ['43.451291', '-80.4927815'], 'Lambton Shores': ['43.19264175', '-81.90202425000001'], 'Loyalist': ['44.20911845', '-76.73314409366216'], 'London': ['42.9832406', '-81.243372'], 'Lincoln': ['43.17354975', '-79.41598053990981'], 'Lanark Highlands': ['45.0875524', '-76.48559826942638'], 'Laurentian Valley': ['45.748619149999996', '-77.2679783426158'], 'LaSalle': ['45.4325141', '-73.6292667'], 'Leamington': ['42.0531166', '-82.5996998'], 'Leeds and the Thousand Islands': ['44.46010075', '-76.07103712045979'], 'Lakeshore': ['42.3038299', '-82.8189267'], 'Mississauga': ['43.5896231', '-79.6443879'], 'Markham': ['43.8563707', '-79.3376825'], 'Minto': ['46.0776889', '-66.0784986'], 'Mississippi Mills': ['45.2513293', '-76.28995754439111'], 'Milton': ['43.513671', '-79.882817'], 'Middlesex Centre': ['43.0021908', '-81.45454153776102'], 'Malahide': ['42.729936', '-80.898832'], 'McNab/Braeside': ['45.41323475', '-76.50873172968235'], 'Muskoka Falls': ['44.99723861928542', '-79.30297739660021'], 'Mono': ['43.9462199', '-80.1042319'], 'Meaford': ['44.6069298', '-80.5916531'], 'Midland': ['44.750147', '-79.885712'], 'North Dundas': ['45.09082255', '-75.37001535932451'], 'Norwich': ['42.987699', '-80.59756'], 'Niagara-on-the-Lake': ['43.2556116', '-79.0723264'], 'North Dumfries': ['43.32297475', '-80.3691519630711'], 'Newmarket': ['44.056258', '-79.461708'], 'North Grenville': ['44.985842649999995', '-75.64483041274728'], 'North Perth': ['43.691227850000004', '-80.9835642546271'], 'North Glengarry': ['45.349324100000004', '-74.67828381952614'], 'North Middlesex': ['43.152165', '-81.62632336803046'], 'North Stormont': ['45.216480950000005', '-75.03346680176028'], 'Niagara Falls': ['43.1065603', '-79.0639039'], 'New Tecumseth': ['44.0818996', '-79.77443058053504'], 'North Bay': ['46.3092115', '-79.4607617'], 'Oliver Paipoonge': ['48.4023268', '-89.53092193148214'], 'Ottawa': ['45.4208777', '-75.6901106'], 'Oshawa': ['43.8975558', '-78.8635324'], 'Orangeville': ['43.9193171', '-80.0973754'], 'Oakville': ['43.447436', '-79.666672'], 'Oro-Medonte': ['44.5445701', '-79.54891085886374'], 'Owen Sound': ['44.5678105', '-80.9430094'], 'Orillia': ['44.6066135', '-79.4169256'], 'Otonabee-South Monaghan': ['44.2433463', '-78.21510688550094'], 'Peterborough': ['44.3048009', '-78.3199496'], 'Plympton-Wyoming': ['43.0699736', '-82.1529152'], 'Port Colborne': ['42.8862392', '-79.2513905'], 'Perth': ['43.4935991', '-81.0164111'], 'Parry Sound': ['45.6675279', '-80.1055284'], 'Pembroke': ['45.8209741', '-77.1115433'], 'Petawawa': ['45.8984286', '-77.2826645'], 'Perth East': ['43.49483625', '-80.97355978729148'], 'Penetanguishene': ['44.7688035', '-79.9339487'], 'Petrolia': ['42.882002', '-82.149582'], 'Port Hope': ['43.9515755', '-78.2939704'], 'Pickering': ['43.835765', '-79.090576'], 'Puslinch': ['43.47750295', '-80.11377014121024'], 'Pelham': ['43.0445702', '-79.2838481'], 'Quinte West': ['44.0988246', '-77.5748551'], 'Queens': ['46.3172856', '-63.1999214'], 'Richmond Hill': ['43.8801166', '-79.4392925'], 'Rockwood': ['50.285829', '-97.314148'], 'Russell': ['45.2573172', '-75.3583264'], 'Renfrew': ['45.7300564', '-77.2793698'], 'Rideau Lakes': ['44.6956662', '-76.25709604054268'], 'Ramara': ['44.6250669', '-79.25539302515944'], 'Springwater': ['44.49409275', '-79.83181291413362'], 'South-West Oxford': ['42.97844085', '-80.82551139448444'], 'South Huron': ['43.33238105', '-81.52918451168405'], 'Saugeen Shores': ['44.4952483', '-81.3713261'], 'Sault Ste. Marie': ['46.5126554', '-84.3330301'], 'South Bruce': ['44.0319668', '-81.19888638182067'], 'South Frontenac': ['44.5403979', '-76.48154805356438'], 'South Glengarry': ['45.1869835', '-74.55400590796428'], 'St. Clements': ['50.27014175', '-96.73755983459328'], 'Sarnia': ['42.9743821', '-82.403533'], 'Stouffville': ['43.9717581', '-79.2454446'], 'Shelburne': ['43.7639539', '-65.321384'], 'Scugog': ['44.1150554', '-78.90598875892695'], 'Southgate': ['44.09883325', '-80.59655909894406'], 'South Bruce Peninsula': ['44.6310905', '-81.268759'], 'Sioux Lookout': ['50.1000964', '-91.9190268'], 'Severn': ['44.7546878', '-79.51491635139335'], 'St. Catharines': ['43.1579812', '-79.2441003'], 'Sudbury': ['46.49272', '-80.991211'], 'South Stormont': ['45.063750150000004', '-74.95146455617325'], 'Southwest Middlesex': ['42.74257325', '-81.70352321815045'], 'Strathroy-Caradoc': ['42.9064729', '-81.55485268973419'], 'St. Thomas': ['42.779022', '-81.1929882'], 'South Dundas': ['44.94854975', '-75.26477130603541'], 'Selwyn': ['44.4262349', '-78.36947993124312'], 'Smiths Falls': ['44.9013316', '-76.0212062'], 'St. Marys': ['43.2570855', '-81.1408629'], 'Stratford': ['43.3700899', '-80.9818016'], 'Stone Mills': ['44.4582381', '-76.93986514878858'], 'St. Clair': ['43.6879512', '-79.3936947'], 'The Nation / La Nation': ['45.38482985', '-74.99865944814178'], 'Trent Hills': ['44.2921994', '-77.82218148636545'], 'Thorold': ['43.1249127', '-79.2005935'], 'Tillsonburg': ['42.859494', '-80.7265015'], 'Trent Lakes': ['44.6630272', '-78.42532426406586'], 'Thunder Bay': ['48.406414', '-89.259796'], 'Tay Valley': ['44.84882225', '-76.41507177274269'], 'Thames Centre': ['43.1054531', '-81.1401989'], 'Toronto': ['43.6534817', '-79.3839347'], 'Timmins': ['48.477473', '-81.330414'], 'Tiny': ['44.7382893', '-80.12709935653204'], 'Tecumseh': ['42.3117951', '-82.8861974'], 'The Blue Mountains': ['44.6721655', '-80.42957956531133'], 'Tweed': ['44.4764863', '-77.3119649'], 'Tay': ['44.7164408', '-79.77099198066065'], 'Temiskaming Shores': ['47.512563', '-79.675598'], 'Uxbridge': ['44.1088502', '-79.1226768'], 'Vaughan': ['43.7941544', '-79.5268023'], 'Wellington North': ['43.91081545', '-80.58398838813542'], 'Windsor': ['42.2858536', '-82.9780695'], 'West Grey': ['44.15537915', '-80.88357696068783'], 'Waterloo': ['43.4652699', '-80.5222961'], 'Wasaga Beach': ['44.5224813', '-80.0203156'], 'Whitby': ['43.87982', '-78.9421751'], 'Wellesley': ['43.6655242', '-79.3838011'], 'West Perth': ['43.475014', '-81.25135702785215'], 'Wainfleet': ['42.9238093', '-79.3764231'], 'West Nipissing / Nipissing Ouest': [46.3660, 79.9249], 'Woodstock': ['46.150346', '-67.573471'], 'Whitewater Region': ['45.8197719', '-76.8902669'], 'Woolwich': ['43.566549699999996', '-80.49951537867625'], 'West Lincoln': [43.0999, 79.5466], 'Welland': ['42.9922181', '-79.2484192'], 'Zorra': ['43.14419385', '-80.95447503190499'], 'Charlottetown': ['46.234953', '-63.132935'], 'Summerside': ['46.394259', '-63.7892386'], 'Alma': ['48.548887', '-71.651459'], 'Acton Vale': ['45.6471564', '-72.5654107'], 'Amqui': ['48.4656706', '-67.4315171'], 'Amos': ['48.5718519', '-78.1160856'], 'Asbestos': ['45.776623', '-71.932297'], 'Bois-des-Filion': ['45.6713243', '-73.7562419'], 'Brossard': ['45.4554579', '-73.4678695'], 'Bromont': ['45.3187339', '-72.6463074'], 'Beauceville': ['46.210725', '-70.774269'], 'Blainville': ['45.67932', '-73.87619'], 'Boucherville': ['45.6050197', '-73.4526144'], 'Baie-Saint-Paul': ['47.444343', '-70.505447'], 'Beauharnois': ['45.3139778', '-73.875834'], 'Beaconsfield': ['45.4289766', '-73.8654387'], 'Bécancour': ['46.3415746', '-72.4335088'], 'Beauport': ['46.89834915', '-71.2062892476116'], 'Blanc-Sablon': ['51.4121624', '-57.2018488'], 'Brownsburg': ['45.676516', '-74.4046061'], 'Beloeil': ['45.5643183', '-73.2040066'], 'Baie-Comeau': ['49.2118373', '-68.1801406'], 'Boisbriand': ['45.6130248', '-73.8386113'], 'Boischatel': ['46.896801', '-71.135788'], 'Cowansville': ['45.2076125', '-72.7479195'], 'Carignan': ['45.437955', '-73.3554902'], 'Champlain': ['46.441406', '-72.343941'], 'Coteau-du-Lac': ['45.2963957', '-74.1782005'], 'Chandler': ['48.3491804', '-64.6775915'], 'Châteauguay': ['45.3602416', '-73.749364'], 'Cookshire': ['45.4125001', '-71.6290758'], 'Cantley': ['45.566468', '-75.782318'], 'Chibougamau': ['49.9137407', '-74.3713954'], 'Contrecoeur': ['45.8573781', '-73.2374307'], 'Coaticook': ['45.1334169', '-71.803479'], 'Côte-Saint-Luc': ['45.4772716', '-73.6637524'], 'Charlemagne': ['45.725519649999995', '-73.4896922220162'], 'Candiac': ['45.3867947', '-73.5163824'], 'Chambly': ['45.4483467', '-73.2936944'], 'Dollard-des-Ormeaux': ['45.48423', '-73.8064547'], 'Dorval': ['45.4453082', '-73.7510888'], 'Delson': ['45.3748635', '-73.5412607'], 'Drummondville': ['45.8864303', '-72.5018764'], 'Donnacona': ['46.676532', '-71.73008'], 'Deux-Montagnes': ['45.5372581', '-73.9043321'], 'Farnham': ['45.2831', '-72.974968'], 'Gaspé': ['48.8317223', '-64.4837569'], 'Granby': ['45.3990409', '-72.721834'], 'Gatineau': ['45.4277659', '-75.710976'], 'Hampstead': ['45.4816781', '-73.647192'], 'Hudson': ['45.464465', '-74.150848'], 'Joliette': ['46.0239798', '-73.4419936'], 'Kirkland': ['45.4529194', '-73.8647559'], 'Kuujjuaq': ['58.1066864', '-68.4038778'], 'Lac-Brome': ['45.2177029', '-72.5372215'], 'Lac-Mégantic': ['45.5772636', '-70.8819927'], 'L’Assomption': ['45.8307051', '-73.4222086'], 'L’Île-Perrot': ['45.393146', '-73.952751'], 'Louiseville': ['46.255609', '-72.947502'], 'Laval': ['45.60558895', '-73.73456014508847'], 'Lévis': ['46.8033114', '-71.1778792'], 'Lorraine': ['45.6704733', '-73.7887505'], 'Les Îles-de-la-Madeleine': ['47.4083414', '-61.7805866'], 'La Tuque': ['47.441092', '-72.78511'], "L'Ange-Gardien": ['46.916738', '-71.091499'], 'La Pêche': ['45.70155285', '-76.07502269482532'], 'La Prairie': ['45.4175472', '-73.4891432'], "L'Epiphanie": ['45.8496673', '-73.4820525'], 'Lachute': ['45.6560478', '-74.3401388'], 'L’Ancienne-Lorette': ['46.8063745', '-71.3584717'], 'La Malbaie': ['47.657525', '-70.153885'], 'Lavaltrie': ['45.883078', '-73.282242'], 'La Sarre': ['48.8000956', '-79.2010223'], 'Longueuil': ['45.521906', '-73.4644578'], 'Les Cèdres': ['45.3085563', '-74.0581993'], 'Matane': ['48.8468773', '-67.5295498'], 'Mercier': ['45.310444', '-73.746051'], 'McMasterville': ['45.5492232', '-73.2302916'], 'Mont-Royal': ['45.5085881', '-73.5897111'], 'Magog': ['45.2658014', '-72.1480686'], 'Mont-Joli': ['48.583875', '-68.183899'], 'Mascouche': ['45.7453521', '-73.6005591'], 'Montréal': ['45.5031824', '-73.5698065'], 'Montréal-Ouest': ['45.4528545', '-73.6442442'], 'Marieville': ['45.4314173', '-73.1637449'], 'Mirabel': ['45.6452452', '-74.0731738'], 'Montmagny': ['46.9826328', '-70.555916'], 'Mont-Saint-Hilaire': ['45.5623512', '-73.1918864'], 'Mont-Tremblant': ['46.11588', '-74.5891426'], 'Mont-Laurier': ['46.5524071', '-75.4968899'], 'Mistassini': ['48.892019', '-72.2084055'], 'Notre-Dame-du-Mont-Carmel': ['46.4916934', '-72.6573131'], "Notre-Dame-de-l'Île-Perrot": ['45.351663', '-73.902969'], 'Nicolet': ['46.2272898', '-72.6192665'], 'Notre-Dame-des-Prairies': ['46.0421555', '-73.4351195'], 'Otterburn Park': ['45.5425651', '-73.2020384'], 'Old Chelsea': ['45.5031737', '-75.808023'], 'Port-Cartier': ['50.0187481', '-66.8756913'], 'Pontiac': ['46.624955', '-76.79261535198437'], 'Pointe-Claire': ['45.4566767', '-73.8067442'], 'Prévost': ['45.8599247', '-74.0700138'], 'Pont-Rouge': ['46.756563', '-71.697807'], 'Plessisville': ['46.219515', '-71.771965'], 'Pointe-Calumet': ['45.5006572', '-73.9668364'], 'Pincourt': ['45.371202', '-73.986053'], 'Princeville': ['46.1722898', '-71.8751852'], 'Quebec City': ['46.8137431', '-71.2084061'], 'Roberval': ['48.514785', '-72.224808'], 'Rimouski': ['48.450155', '-68.529968'], 'Rivière-du-Loup': ['47.8358164', '-69.5368025'], 'Repentigny': ['45.7326055', '-73.4528307'], 'Rawdon': ['46.0454129', '-73.7107666'], 'Richelieu': ['45.4439193', '-73.2488055'], 'Rouyn-Noranda': ['48.2420524', '-79.0205378'], 'Rosemère': ['45.6323155', '-73.8052338'], 'Rigaud': ['45.4794481', '-74.3019608'], 'Shannon': ['46.8871959', '-71.5164368'], 'Saint-Lambert-de-Lauzon': ['46.58671', '-71.213379'], 'Sainte-Brigitte-de-Laval': ['47.0025', '-71.194496'], 'Sherbrooke': ['45.403271', '-71.889038'], 'Sainte-Agathe-des-Monts': ['46.046072', '-74.279938'], 'Saint-Augustin-de-Desmaures': ['46.743354', '-71.4569733'], 'Saint-Amable': ['45.652688', '-73.295631'], 'Sorel-Tracy': ['46.0435235', '-73.1165159'], 'Salaberry-de-Valleyfield': ['45.2555575', '-74.1316718'], 'Saint-Lazare': ['45.3995886', '-74.1359632'], 'Saint-Jérôme': ['45.7780402', '-74.0033272'], 'Saint-Bruno-de-Montarville': ['45.5256161', '-73.3391798'], 'Sainte-Adèle': ['45.951895', '-74.1359579'], 'Sainte-Julienne': ['45.9624229', '-73.710013'], 'Saint-Sauveur': ['45.894309', '-74.158058'], 'Saint-Pie': ['45.504903', '-72.905273'], 'Saint-Hippolyte': ['45.9311755', '-74.0248093'], 'Saint-Henri': ['46.692077', '-71.067123'], 'Sainte-Julie': ['45.5930624', '-73.3395943'], 'Saint-Rémi': ['45.2591064', '-73.6188315'], 'Saint-Hyacinthe': ['45.627484', '-72.940636'], 'Saint-Eustache': ['45.5646052', '-73.8929714'], 'Saint-Honoré': ['48.5333057', '-71.0856828'], 'Saint-Raymond': ['46.889058', '-71.835136'], 'Saint-Calixte': ['45.951627', '-73.849411'], 'Sainte-Thérèse': ['45.6342923', '-73.8362379'], 'Saint-Constant': ['45.3724897', '-73.5704589'], 'Saint-Césaire': ['45.4100995', '-73.0040509'], 'Sainte-Catherine': ['45.40049', '-73.576257'], 'Saint-Apollinaire': ['46.61195', '-71.513786'], 'Saint-Basile-le-Grand': ['45.526246', '-73.2876515'], 'Sainte-Marthe-sur-le-Lac': ['45.5295339', '-73.9326476'], 'Saint-Lin--Laurentides': ['45.857047699999995', '-73.78085836161237'], 'Saguenay': ['48.405959', '-71.069183'], 'Sainte-Martine': ['45.246129', '-73.804436'], 'Saint-Charles-Borromée': ['46.04774', '-73.46283'], 'Saint-Lambert': ['45.5016203', '-73.5102981'], 'Sainte-Sophie': ['45.818718', '-73.8991887'], 'Saint-Félicien': ['48.654232', '-72.448654'], 'Saint-Jean-sur-Richelieu': ['45.3056879', '-73.2533401'], 'Sainte-Anne-des-Monts': ['49.1263278', '-66.4849502'], 'Sainte-Marie': ['46.450395', '-71.030731'], 'Sainte-Catherine-de-la-Jacques-Cartier': ['46.8443807', '-71.615023'], 'Saint-Philippe': ['45.3583776', '-73.4783036'], 'Sept-Îles': ['50.2109579', '-66.3790642'], 'Saint-Zotique': ['45.2425481', '-74.2477841'], 'Shawinigan': ['46.5396581', '-72.7518637'], 'Sainte-Anne-des-Plaines': ['45.76417', '-73.818855'], 'Saint-Colomban': ['45.7398754', '-74.1378332'], 'Stoneham-et-Tewkesbury': ['47.11916705', '-71.39620298735576'], 'Saint-Joseph-du-Lac': ['45.5333352', '-74.0060242'], 'Saint-Félix-de-Valois': ['46.1700019', '-73.4246401'], 'Trois-Rivières': ['46.3432325', '-72.5428485'], 'Thetford Mines': ['46.091329', '-71.30127'], 'Terrebonne': ['45.6951527', '-73.6350148'], 'Témiscouata-sur-le-Lac': ['47.67154305', '-68.87854866367469'], 'Verchères': ['45.7727845', '-73.355442'], 'Varennes': ['45.6834691', '-73.4362737'], 'Val-David': ['46.0282815', '-74.2065632'], 'Victoriaville': ['46.0554948', '-71.9598586'], 'Val-d’Or': ['48.1023356', '-77.7875715'], 'Vaudreuil-Dorion': ['45.3971509', '-74.0254577'], 'Val-des-Monts': ['45.6918799', '-75.68941698545765'], 'Val-Shefford': ['45.415244', '-72.6246677'], 'Westmount': ['45.4856917', '-73.596562'], 'Corman Park No. 344': ['52.2606197', '-106.7902157'], 'Estevan': ['49.1428076', '-102.991075'], 'Humboldt': ['52.202009', '-105.1230368'], 'La Ronge': ['55.1005283', '-105.2900485'], 'Melfort': ['52.8613707', '-104.6135544'], 'Moose Jaw': ['50.401515', '-105.542908'], 'Meadow Lake': ['54.13026', '-108.435059'], 'Martensville': ['52.2903172', '-106.662554'], 'North Battleford': ['52.776186', '-108.300476'], 'Prince Albert': ['53.201097', '-105.748901'], 'Regina': ['50.4479733', '-104.6158764'], 'Saskatoon': ['52.131802', '-106.660767'], 'Swift Current': ['50.2849138', '-107.7984496'], 'Weyburn': ['49.6651238', '-103.854034'], 'Warman': ['52.320232', '-106.575623'], 'Yorkton': ['51.212045', '-102.461243'], 'Fort Simpson': ['61.8631427', '-121.354276'], 'Hay River': ['60.8155874', '-115.7866099'], 'Inuvik': ['68.3602632', '-133.720386'], 'Norman Wells': ['65.282401', '-126.832725'], 'Yellowknife': ['62.47496825', '-114.4304652775906'], 'Arctic Bay': ['73.06317795000001', '-85.02096980646908'], 'Clyde River': ['46.2239354', '-63.2576799'], 'Grise Fiord': ['76.418772', '-82.9015251'], 'Gjoa Haven': ['68.64252755', '-95.87829702808895'], 'Iqaluit': ['63.7492738', '-68.5213763'], 'Igloolik': ['69.3788839', '-81.7947989'], 'Kinngait': ['64.2322773', '-76.5432179'], 'Pangnirtung': ['66.1480197', '-65.7172826'], 'Pond Inlet': ['72.6976743', '-77.9574381'], 'Qikiqtarjuaq': ['67.5580224', '-64.0168832'], 'Resolute': ['74.697029', '-94.840851'], 'Rankin Inlet': ['62.8030269', '-92.0868012'], 'Whitehorse': ['60.721571', '-135.054932']};
// 组件：用于移动地图视角并放大
function ChangeView({ center, zoom }) {
    const map = useMap();
    useEffect(() => {
        if (center) {
            map.setView(center, zoom, { animate: true }); // 平滑过渡
        }
    }, [center, zoom, map]);
    return null;
}

function CanadaMap({ selectedCity }) {
    const defaultPosition = [56.130366, -106.346771]; // 默认加拿大中心点
    const cityPosition = cityCoordinates[selectedCity] || defaultPosition;
    const zoomLevel = selectedCity ? 15 : 4; // 选城市后放大到 10，否则默认 4

    return (
        <MapContainer
            center={defaultPosition}
            zoom={4}
            style={{ height: '600px', width: '100%' }}
            maxBounds={[[40, -150], [85, -50]]}
            minZoom={3}
            maxZoom={12} // 允许更大缩放
        >
            <TileLayer
                url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
                attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            />

            {/* 更新地图视角，并放大 */}
            <ChangeView center={cityPosition} zoom={zoomLevel} />

            {/* 标记主要城市
            {Object.entries(cityCoordinates).map(([city, position]) => (
                <Marker key={city} position={position}>
                    <Popup>{city}</Popup>
                </Marker>
            ))} */}

            {/* 选中的城市也添加一个 marker */}
            {selectedCity && cityCoordinates[selectedCity] && (
                <Marker position={cityPosition}>
                    <Popup>{selectedCity}</Popup>
                </Marker>
            )}
        </MapContainer>
    );
}

export default CanadaMap;
